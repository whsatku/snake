<form name="lobby" class="container">
	<div class="row">
		<div class="col-md-8">
			<h1 ng-bind="lobbySettings.name"></h1>
			
			<table class="table table-striped table-bordered">
				<thead>
					<tr>
						<th>Name</th>
						<th>Color</th>
						<th>Ready</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="player in lobbySettings.players track by $index">
						<td ng-if="!player" colspan="3">Open</td>
						<td ng-if="player && $index != playerIndex" ng-bind="player.name"></td>
						<td ng-if="player && $index == playerIndex">
							<input name="player[]" type="text" ng-model="player.name" class="form-control" maxlength="8" required>
						</td>
						<td ng-if="player && $index != playerIndex" ng-bind="player.color | snakeColor" class="snake-color-{{player.color}}"></td>
						<td ng-if="player && $index == playerIndex">
							<select ng-model="player.color" class="form-control">
								<option ng-repeat="color in [1,2,3,4,5,6]" value="{{color}}" ng-bind="color|snakeColor" class="snake-color-{{color}}"></option>
							</select>
						</td>
						<td ng-if="player && $index != playerIndex">{{player.ready | yesno}}</td>
						<td ng-if="player && $index == playerIndex"><input type="checkbox" ng-model="player.ready"></td>
					</tr>
				</tbody>
			</table>
			<a href="#" ng-click="startGame()" class="btn btn-primary" ng-if="playerIndex == 0" ng-disabled="!ready || lobby.$invalid">Start game</a>
			<a ng-if="lobbySettings.local" ui-sref="mainmenu" class="btn btn-danger">Leave lobby</a>
			<a ng-if="!lobbySettings.local" ui-sref="mainmenu" class="btn btn-danger">Leave lobby</a>
		</div>
		<div class="col-md-4">
			<h2>Game settings</h2>
			<p>Map selector</p>
			<div class="form-group" ng-if="playerIndex == 0 && !lobbySettings.local">
				<label class="control-label" for="lobbyName">Lobby name</label>
				<input type="text" id="lobbyName" class="form-control" ng-model="lobbySettings.name" maxlength="8">
			</div>
			<div class="form-group" ng-class="{'has-error': lobby.scoreLimit.$invalid}">
				<label class="control-label" for="scoreLimit">Score limit</label>
				<input name="scoreLimit" id="scoreLimit" type="number" class="form-control" ng-model="lobbySettings.scoreLimit" min="1">
				<p class="help-block">Game will wins after a snake reached this score</p>
			</div>
			<div class="form-group" ng-class="{'has-error': lobby.itemLimit.$invalid}">
				<label class="control-label" for="itemLimit">Item limit</label>
				<input name="itemLimit" id="itemLimit" type="number" class="form-control" ng-model="lobbySettings.itemLimit" min="1">
				<p class="help-block">Game will ends after this items collected</p>
			</div>
			<div class="form-group" ng-class="{'has-error': lobby.fragLimit.$invalid}">
				<label class="control-label" for="fragLimit">Respawn limit</label>
				<input name="fragLimit" id="fragLimit" type="number" class="form-control" ng-model="lobbySettings.fragLimit" min="0">
				<p class="help-block">Snake will be removed from play after being killed this times</p>
			</div>
			<div class="form-group">
				<label>
					<input type="checkbox" ng-model="lobbySettings.perk">
					Spawn perk
				</label>
			</div>
		</div>
	</div>
</form>